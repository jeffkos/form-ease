<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FormEase - Créateur de Formulaire Premium</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@12/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/@tremor/react@3.18.7/dist/index.js"></script>
    <script src="https://unpkg.com/@heroicons/react@2.2.0/24/outline/index.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useCallback, useRef } = React;
        const { motion, AnimatePresence } = window.Motion;
        const { Card, Title, Text, Button, Grid, Badge, Metric } = Tremor;
        
        // Simuler les icônes Heroicons
        const PlusIcon = () => <span>➕</span>;
        const TrashIcon = () => <span>🗑️</span>;
        const CogIcon = () => <span>⚙️</span>;
        const EyeIcon = () => <span>👁️</span>;
        const DocumentIcon = () => <span>📄</span>;
        const PhotoIcon = () => <span>📷</span>;
        const CalendarIcon = () => <span>📅</span>;
        const CheckIcon = () => <span>✅</span>;
        const StarIcon = () => <span>⭐</span>;

        // Types de champs disponibles pour Premium
        const fieldTypes = [
            { 
                id: 'text', 
                name: 'Texte Simple', 
                icon: DocumentIcon, 
                category: 'Basique',
                premium: false 
            },
            { 
                id: 'email', 
                name: 'Email', 
                icon: DocumentIcon, 
                category: 'Basique',
                premium: false 
            },
            { 
                id: 'textarea', 
                name: 'Zone de Texte', 
                icon: DocumentIcon, 
                category: 'Basique',
                premium: false 
            },
            { 
                id: 'select', 
                name: 'Liste Déroulante', 
                icon: DocumentIcon, 
                category: 'Choix',
                premium: false 
            },
            { 
                id: 'radio', 
                name: 'Boutons Radio', 
                icon: CheckIcon, 
                category: 'Choix',
                premium: false 
            },
            { 
                id: 'checkbox', 
                name: 'Cases à Cocher', 
                icon: CheckIcon, 
                category: 'Choix',
                premium: false 
            },
            { 
                id: 'file', 
                name: 'Upload Fichier', 
                icon: PhotoIcon, 
                category: 'Avancé',
                premium: true 
            },
            { 
                id: 'date', 
                name: 'Sélecteur Date', 
                icon: CalendarIcon, 
                category: 'Avancé',
                premium: true 
            },
            { 
                id: 'rating', 
                name: 'Évaluation Étoiles', 
                icon: StarIcon, 
                category: 'Premium',
                premium: true 
            },
            { 
                id: 'signature', 
                name: 'Signature Digitale', 
                icon: DocumentIcon, 
                category: 'Premium',
                premium: true 
            },
            { 
                id: 'matrix', 
                name: 'Grille de Questions', 
                icon: DocumentIcon, 
                category: 'Premium',
                premium: true 
            },
            { 
                id: 'payment', 
                name: 'Paiement Stripe', 
                icon: DocumentIcon, 
                category: 'Premium',
                premium: true 
            }
        ];

        function FormBuilderPremium() {
            const [formFields, setFormFields] = useState([]);
            const [selectedField, setSelectedField] = useState(null);
            const [formTitle, setFormTitle] = useState('Mon Nouveau Formulaire');
            const [isPreviewMode, setIsPreviewMode] = useState(false);

            const addField = useCallback((fieldType) => {
                const newField = {
                    id: Date.now(),
                    type: fieldType.id,
                    name: fieldType.name,
                    label: `${fieldType.name} ${formFields.length + 1}`,
                    required: false,
                    placeholder: '',
                    options: fieldType.id === 'select' || fieldType.id === 'radio' || fieldType.id === 'checkbox' 
                        ? ['Option 1', 'Option 2', 'Option 3'] 
                        : [],
                    premium: fieldType.premium
                };
                setFormFields(prev => [...prev, newField]);
            }, [formFields]);

            const removeField = useCallback((fieldId) => {
                setFormFields(prev => prev.filter(f => f.id !== fieldId));
                setSelectedField(null);
            }, []);

            const updateField = useCallback((fieldId, updates) => {
                setFormFields(prev => prev.map(f => 
                    f.id === fieldId ? { ...f, ...updates } : f
                ));
            }, []);

            const renderField = (field) => {
                switch (field.type) {
                    case 'text':
                    case 'email':
                        return (
                            <input
                                type={field.type}
                                placeholder={field.placeholder || field.label}
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                disabled={isPreviewMode}
                            />
                        );
                    case 'textarea':
                        return (
                            <textarea
                                placeholder={field.placeholder || field.label}
                                rows="4"
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                disabled={isPreviewMode}
                            />
                        );
                    case 'select':
                        return (
                            <select className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" disabled={isPreviewMode}>
                                <option>Sélectionnez une option</option>
                                {field.options.map((option, idx) => (
                                    <option key={idx} value={option}>{option}</option>
                                ))}
                            </select>
                        );
                    case 'radio':
                        return (
                            <div className="space-y-2">
                                {field.options.map((option, idx) => (
                                    <label key={idx} className="flex items-center space-x-2">
                                        <input type="radio" name={`field-${field.id}`} value={option} disabled={isPreviewMode} />
                                        <span>{option}</span>
                                    </label>
                                ))}
                            </div>
                        );
                    case 'checkbox':
                        return (
                            <div className="space-y-2">
                                {field.options.map((option, idx) => (
                                    <label key={idx} className="flex items-center space-x-2">
                                        <input type="checkbox" value={option} disabled={isPreviewMode} />
                                        <span>{option}</span>
                                    </label>
                                ))}
                            </div>
                        );
                    case 'file':
                        return (
                            <div className="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                                <PhotoIcon className="h-8 w-8 mx-auto text-gray-400 mb-2" />
                                <Text className="text-gray-600">
                                    {field.premium ? '🎯 Upload Avancé Premium' : 'Glissez vos fichiers ici'}
                                </Text>
                            </div>
                        );
                    case 'date':
                        return (
                            <input
                                type="date"
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                disabled={isPreviewMode}
                            />
                        );
                    case 'rating':
                        return (
                            <div className="flex space-x-1">
                                {[1,2,3,4,5].map(star => (
                                    <button key={star} className="text-2xl text-yellow-400 hover:text-yellow-500" disabled={isPreviewMode}>
                                        ⭐
                                    </button>
                                ))}
                            </div>
                        );
                    case 'signature':
                        return (
                            <div className="border border-gray-300 rounded-lg p-4 bg-gray-50 text-center">
                                <Text className="text-gray-600">🎯 Zone de Signature Premium</Text>
                                <div className="h-24 border-2 border-dashed border-gray-300 rounded mt-2 flex items-center justify-center">
                                    <Text className="text-gray-400">Signez ici</Text>
                                </div>
                            </div>
                        );
                    case 'matrix':
                        return (
                            <div className="overflow-x-auto">
                                <table className="w-full border border-gray-300">
                                    <thead>
                                        <tr className="bg-gray-100">
                                            <th className="border border-gray-300 p-2"></th>
                                            <th className="border border-gray-300 p-2">Excellent</th>
                                            <th className="border border-gray-300 p-2">Bon</th>
                                            <th className="border border-gray-300 p-2">Moyen</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td className="border border-gray-300 p-2 font-medium">Qualité</td>
                                            <td className="border border-gray-300 p-2 text-center">
                                                <input type="radio" name="quality" disabled={isPreviewMode} />
                                            </td>
                                            <td className="border border-gray-300 p-2 text-center">
                                                <input type="radio" name="quality" disabled={isPreviewMode} />
                                            </td>
                                            <td className="border border-gray-300 p-2 text-center">
                                                <input type="radio" name="quality" disabled={isPreviewMode} />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        );
                    case 'payment':
                        return (
                            <div className="border border-gray-300 rounded-lg p-4 bg-blue-50">
                                <Text className="font-medium mb-2">💳 Paiement Sécurisé</Text>
                                <div className="space-y-3">
                                    <input
                                        type="text"
                                        placeholder="Numéro de carte"
                                        className="w-full p-3 border border-gray-300 rounded"
                                        disabled={isPreviewMode}
                                    />
                                    <div className="grid grid-cols-2 gap-3">
                                        <input
                                            type="text"
                                            placeholder="MM/AA"
                                            className="p-3 border border-gray-300 rounded"
                                            disabled={isPreviewMode}
                                        />
                                        <input
                                            type="text"
                                            placeholder="CVV"
                                            className="p-3 border border-gray-300 rounded"
                                            disabled={isPreviewMode}
                                        />
                                    </div>
                                </div>
                            </div>
                        );
                    default:
                        return <div>Type de champ non supporté</div>;
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <div className="flex justify-between items-center">
                                <div>
                                    <Title className="text-2xl font-bold text-gray-900">
                                        🎯 Créateur de Formulaire Premium
                                    </Title>
                                    <Text className="text-gray-600 mt-1">
                                        Accès complet aux fonctionnalités avancées
                                    </Text>
                                </div>
                                <div className="flex space-x-3">
                                    <Button
                                        variant={isPreviewMode ? "primary" : "secondary"}
                                        size="sm"
                                        onClick={() => setIsPreviewMode(!isPreviewMode)}
                                    >
                                        <EyeIcon className="h-4 w-4 mr-2" />
                                        {isPreviewMode ? 'Mode Édition' : 'Aperçu'}
                                    </Button>
                                    <Button size="sm">
                                        Publier le Formulaire
                                    </Button>
                                </div>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
                            {/* Palette des champs */}
                            {!isPreviewMode && (
                                <Card className="lg:col-span-1 p-6">
                                    <Title className="mb-4">Champs Disponibles</Title>
                                    
                                    {['Basique', 'Choix', 'Avancé', 'Premium'].map(category => (
                                        <div key={category} className="mb-6">
                                            <Text className="font-semibold mb-2 text-gray-700">{category}</Text>
                                            <div className="space-y-2">
                                                {fieldTypes
                                                    .filter(field => field.category === category)
                                                    .map(fieldType => {
                                                        const IconComponent = fieldType.icon;
                                                        return (
                                                            <motion.button
                                                                key={fieldType.id}
                                                                onClick={() => addField(fieldType)}
                                                                className={`w-full p-3 text-left rounded-lg border transition-all ${
                                                                    fieldType.premium 
                                                                        ? 'border-blue-300 bg-blue-50 hover:bg-blue-100' 
                                                                        : 'border-gray-300 bg-white hover:bg-gray-50'
                                                                }`}
                                                                whileHover={{ scale: 1.02 }}
                                                                whileTap={{ scale: 0.98 }}
                                                            >
                                                                <div className="flex items-center space-x-2">
                                                                    <IconComponent className="h-4 w-4" />
                                                                    <span className="text-sm font-medium">{fieldType.name}</span>
                                                                    {fieldType.premium && (
                                                                        <Badge color="blue" size="xs">Premium</Badge>
                                                                    )}
                                                                </div>
                                                            </motion.button>
                                                        );
                                                    })}
                                            </div>
                                        </div>
                                    ))}
                                </Card>
                            )}

                            {/* Zone de construction du formulaire */}
                            <Card className={`${isPreviewMode ? 'lg:col-span-4' : 'lg:col-span-3'} p-6`}>
                                <div className="mb-6">
                                    <input
                                        type="text"
                                        value={formTitle}
                                        onChange={(e) => setFormTitle(e.target.value)}
                                        className="text-2xl font-bold bg-transparent border-none outline-none w-full"
                                        disabled={isPreviewMode}
                                    />
                                    <Text className="text-gray-600 mt-1">
                                        {formFields.length} champ(s) • Version Premium
                                    </Text>
                                </div>

                                <AnimatePresence>
                                    {formFields.length === 0 ? (
                                        <motion.div
                                            initial={{ opacity: 0 }}
                                            animate={{ opacity: 1 }}
                                            className="text-center py-12 border-2 border-dashed border-gray-300 rounded-lg"
                                        >
                                            <DocumentIcon className="h-12 w-12 mx-auto text-gray-400 mb-4" />
                                            <Text className="text-gray-600 text-lg">
                                                Commencez par ajouter des champs à votre formulaire
                                            </Text>
                                            <Text className="text-gray-500 text-sm mt-2">
                                                Glissez des éléments depuis la palette ou cliquez pour les ajouter
                                            </Text>
                                        </motion.div>
                                    ) : (
                                        <div className="space-y-4">
                                            {formFields.map((field) => (
                                                <motion.div
                                                    key={field.id}
                                                    initial={{ opacity: 0, y: 20 }}
                                                    animate={{ opacity: 1, y: 0 }}
                                                    exit={{ opacity: 0, y: -20 }}
                                                    className={`p-4 border-2 rounded-lg transition-all ${
                                                        selectedField?.id === field.id 
                                                            ? 'border-blue-500 bg-blue-50' 
                                                            : 'border-gray-200 hover:border-gray-300'
                                                    }`}
                                                    onClick={() => setSelectedField(field)}
                                                >
                                                    <div className="flex justify-between items-start mb-3">
                                                        <div className="flex items-center space-x-2">
                                                            <label className="font-medium text-gray-900">
                                                                {field.label}
                                                                {field.required && <span className="text-red-500 ml-1">*</span>}
                                                            </label>
                                                            {field.premium && (
                                                                <Badge color="blue" size="xs">Premium</Badge>
                                                            )}
                                                        </div>
                                                        {!isPreviewMode && (
                                                            <div className="flex space-x-2">
                                                                <button
                                                                    onClick={(e) => {
                                                                        e.stopPropagation();
                                                                        setSelectedField(field);
                                                                    }}
                                                                    className="text-gray-400 hover:text-gray-600"
                                                                >
                                                                    <CogIcon className="h-4 w-4" />
                                                                </button>
                                                                <button
                                                                    onClick={(e) => {
                                                                        e.stopPropagation();
                                                                        removeField(field.id);
                                                                    }}
                                                                    className="text-gray-400 hover:text-red-600"
                                                                >
                                                                    <TrashIcon className="h-4 w-4" />
                                                                </button>
                                                            </div>
                                                        )}
                                                    </div>

                                                    {renderField(field)}
                                                </motion.div>
                                            ))}
                                        </div>
                                    )}
                                </AnimatePresence>

                                {/* Bouton de soumission */}
                                {formFields.length > 0 && (
                                    <div className="mt-6 pt-6 border-t border-gray-200">
                                        <Button size="lg" className="w-full sm:w-auto">
                                            Envoyer le Formulaire
                                        </Button>
                                    </div>
                                )}
                            </Card>
                        </div>

                        {/* Panneau de propriétés */}
                        {selectedField && !isPreviewMode && (
                            <motion.div
                                initial={{ opacity: 0, y: 20 }}
                                animate={{ opacity: 1, y: 0 }}
                                className="fixed bottom-6 right-6 w-80 bg-white rounded-lg shadow-xl p-6 border"
                            >
                                <div className="flex justify-between items-center mb-4">
                                    <Title className="text-lg">Propriétés du Champ</Title>
                                    <button
                                        onClick={() => setSelectedField(null)}
                                        className="text-gray-400 hover:text-gray-600"
                                    >
                                        ✕
                                    </button>
                                </div>

                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            Label du champ
                                        </label>
                                        <input
                                            type="text"
                                            value={selectedField.label}
                                            onChange={(e) => updateField(selectedField.id, { label: e.target.value })}
                                            className="w-full p-2 border border-gray-300 rounded"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            Placeholder
                                        </label>
                                        <input
                                            type="text"
                                            value={selectedField.placeholder}
                                            onChange={(e) => updateField(selectedField.id, { placeholder: e.target.value })}
                                            className="w-full p-2 border border-gray-300 rounded"
                                            placeholder="Texte d'aide"
                                        />
                                    </div>

                                    <div className="flex items-center space-x-2">
                                        <input
                                            type="checkbox"
                                            checked={selectedField.required}
                                            onChange={(e) => updateField(selectedField.id, { required: e.target.checked })}
                                            id="required"
                                        />
                                        <label htmlFor="required" className="text-sm font-medium text-gray-700">
                                            Champ obligatoire
                                        </label>
                                    </div>

                                    {(selectedField.type === 'select' || selectedField.type === 'radio' || selectedField.type === 'checkbox') && (
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">
                                                Options
                                            </label>
                                            <div className="space-y-2">
                                                {selectedField.options.map((option, idx) => (
                                                    <div key={idx} className="flex space-x-2">
                                                        <input
                                                            type="text"
                                                            value={option}
                                                            onChange={(e) => {
                                                                const newOptions = [...selectedField.options];
                                                                newOptions[idx] = e.target.value;
                                                                updateField(selectedField.id, { options: newOptions });
                                                            }}
                                                            className="flex-1 p-2 border border-gray-300 rounded"
                                                        />
                                                        <button
                                                            onClick={() => {
                                                                const newOptions = selectedField.options.filter((_, i) => i !== idx);
                                                                updateField(selectedField.id, { options: newOptions });
                                                            }}
                                                            className="text-red-500 hover:text-red-700"
                                                        >
                                                            ✕
                                                        </button>
                                                    </div>
                                                ))}
                                                <button
                                                    onClick={() => {
                                                        const newOptions = [...selectedField.options, `Option ${selectedField.options.length + 1}`];
                                                        updateField(selectedField.id, { options: newOptions });
                                                    }}
                                                    className="text-blue-500 hover:text-blue-700 text-sm"
                                                >
                                                    + Ajouter une option
                                                </button>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </motion.div>
                        )}
                    </div>
                </div>
            );
        }

        function App() {
            return <FormBuilderPremium />;
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
