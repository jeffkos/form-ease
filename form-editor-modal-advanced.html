<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FormEase - Éditeur Avancé de Formulaire</title>
    <script src="https://unpkg.com/@tremor/react@latest/dist/index.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'ui-sans-serif', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'Noto Sans', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        .tremor-base {
            --tremor-brand-faint: #eff6ff;
            --tremor-brand-muted: #bfdbfe;
            --tremor-brand-subtle: #60a5fa;
            --tremor-brand: #3b82f6;
            --tremor-brand-emphasis: #1d4ed8;
            --tremor-brand-inverted: #ffffff;
        }

        .slide-in {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .fade-in {
            animation: fadeIn 0.2s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .field-preview {
            transition: all 0.2s ease;
        }

        .field-preview:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .drag-handle {
            cursor: grab;
        }

        .drag-handle:active {
            cursor: grabbing;
        }

        .form-builder-grid {
            background-image: 
                linear-gradient(to right, #f3f4f6 1px, transparent 1px),
                linear-gradient(to bottom, #f3f4f6 1px, transparent 1px);
            background-size: 20px 20px;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { 
            Card, CardHeader, CardContent, 
            Button, Badge, 
            TextInput, Textarea, Select, SelectItem,
            Tab, TabGroup, TabList, TabPanel, TabPanels,
            Grid, Col, Flex,
            Title, Subtitle, Text, Metric,
            BarChart, DonutChart, AreaChart,
            Table, TableHead, TableRow, TableHeaderCell, TableBody, TableCell,
            Callout, Alert,
            Switch, Checkbox,
            ProgressBar, Tracker,
            DatePicker, NumberInput,
            SearchSelect, SearchSelectItem,
            MultiSelect, MultiSelectItem
        } = Tremor;

        // Données exemple pour le formulaire
        const sampleForm = {
            id: "form_001",
            name: "Formulaire de Contact Premium",
            description: "Un formulaire de contact avancé avec validation et intégrations",
            category: "contact",
            status: "active",
            settings: {
                allowMultipleSubmissions: true,
                requireLogin: false,
                enableAnalytics: true,
                autoResponse: true,
                enableNotifications: true,
                captchaEnabled: true
            },
            fields: [
                {
                    id: "field_1",
                    type: "text",
                    label: "Nom complet",
                    placeholder: "Entrez votre nom",
                    required: true,
                    validation: { minLength: 2, maxLength: 50 }
                },
                {
                    id: "field_2",
                    type: "email",
                    label: "Adresse email",
                    placeholder: "votre@email.com",
                    required: true,
                    validation: { format: "email" }
                },
                {
                    id: "field_3",
                    type: "select",
                    label: "Sujet",
                    required: true,
                    options: ["Question générale", "Support technique", "Partenariat", "Autre"]
                },
                {
                    id: "field_4",
                    type: "textarea",
                    label: "Message",
                    placeholder: "Décrivez votre demande...",
                    required: true,
                    validation: { minLength: 10, maxLength: 1000 }
                }
            ],
            integrations: {
                email: { enabled: true, recipient: "contact@formease.com" },
                webhook: { enabled: false, url: "" },
                googleSheets: { enabled: false, sheetId: "" },
                zapier: { enabled: false, webhookUrl: "" }
            },
            analytics: {
                totalViews: 1247,
                submissions: 89,
                conversionRate: 7.1,
                averageTime: "2m 34s",
                bounceRate: 23.4
            }
        };

        // Composants de champs disponibles
        const availableFields = [
            {
                type: "text",
                label: "Champ Texte",
                icon: "ri-input-method-line",
                color: "blue",
                description: "Saisie de texte simple"
            },
            {
                type: "email",
                label: "Email",
                icon: "ri-mail-line",
                color: "green",
                description: "Adresse email avec validation"
            },
            {
                type: "tel",
                label: "Téléphone",
                icon: "ri-phone-line",
                color: "purple",
                description: "Numéro de téléphone"
            },
            {
                type: "textarea",
                label: "Zone de Texte",
                icon: "ri-file-text-line",
                color: "orange",
                description: "Texte long multiligne"
            },
            {
                type: "select",
                label: "Liste Déroulante",
                icon: "ri-arrow-down-s-line",
                color: "yellow",
                description: "Sélection unique"
            },
            {
                type: "multiselect",
                label: "Sélection Multiple",
                icon: "ri-checkbox-multiple-line",
                color: "indigo",
                description: "Choix multiples"
            },
            {
                type: "radio",
                label: "Boutons Radio",
                icon: "ri-radio-button-line",
                color: "pink",
                description: "Choix unique parmi plusieurs"
            },
            {
                type: "checkbox",
                label: "Cases à Cocher",
                icon: "ri-checkbox-line",
                color: "teal",
                description: "Sélections multiples"
            },
            {
                type: "number",
                label: "Nombre",
                icon: "ri-hashtag",
                color: "red",
                description: "Saisie numérique"
            },
            {
                type: "date",
                label: "Date",
                icon: "ri-calendar-line",
                color: "cyan",
                description: "Sélection de date"
            },
            {
                type: "file",
                label: "Upload Fichier",
                icon: "ri-upload-line",
                color: "violet",
                description: "Téléchargement de fichiers"
            },
            {
                type: "rating",
                label: "Note/Évaluation",
                icon: "ri-star-line",
                color: "amber",
                description: "Système de notation"
            }
        ];

        const FormEditorModal = ({ form, isOpen, onClose, onSave }) => {
            const [activeTab, setActiveTab] = useState("fields");
            const [formData, setFormData] = useState(form);
            const [selectedField, setSelectedField] = useState(null);
            const [previewMode, setPreviewMode] = useState(false);

            if (!isOpen) return null;

            const saveForm = () => {
                onSave(formData);
                onClose();
            };

            const addField = (fieldType) => {
                const newField = {
                    id: `field_${Date.now()}`,
                    type: fieldType.type,
                    label: fieldType.label,
                    placeholder: `Entrez ${fieldType.label.toLowerCase()}`,
                    required: false,
                    validation: {}
                };
                
                setFormData({
                    ...formData,
                    fields: [...formData.fields, newField]
                });
            };

            const updateField = (fieldId, updates) => {
                setFormData({
                    ...formData,
                    fields: formData.fields.map(field => 
                        field.id === fieldId ? { ...field, ...updates } : field
                    )
                });
            };

            const removeField = (fieldId) => {
                setFormData({
                    ...formData,
                    fields: formData.fields.filter(field => field.id !== fieldId)
                });
                setSelectedField(null);
            };

            const renderFieldPreview = (field) => {
                const fieldComponent = availableFields.find(f => f.type === field.type);
                
                return (
                    <div 
                        key={field.id}
                        className={`field-preview p-4 bg-white border-2 rounded-lg cursor-pointer transition-all ${
                            selectedField?.id === field.id ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'
                        }`}
                        onClick={() => setSelectedField(field)}
                    >
                        <div className="flex items-center justify-between mb-2">
                            <div className="flex items-center space-x-2">
                                <i className={`${fieldComponent?.icon} text-${fieldComponent?.color}-600`}></i>
                                <span className="font-medium text-sm">{field.label}</span>
                                {field.required && <Badge color="red" size="xs">Requis</Badge>}
                            </div>
                            <div className="flex items-center space-x-1">
                                <button 
                                    className="drag-handle p-1 text-gray-400 hover:text-gray-600"
                                    title="Glisser pour réorganiser"
                                >
                                    <i className="ri-drag-move-line"></i>
                                </button>
                                <button 
                                    className="p-1 text-red-400 hover:text-red-600"
                                    onClick={(e) => {
                                        e.stopPropagation();
                                        removeField(field.id);
                                    }}
                                    title="Supprimer"
                                >
                                    <i className="ri-delete-bin-line"></i>
                                </button>
                            </div>
                        </div>
                        
                        {/* Aperçu du champ */}
                        <div className="text-xs text-gray-500 mb-2">
                            {fieldComponent?.description}
                        </div>
                        
                        {field.type === 'text' || field.type === 'email' || field.type === 'tel' ? (
                            <TextInput 
                                placeholder={field.placeholder} 
                                disabled 
                                className="opacity-60"
                            />
                        ) : field.type === 'textarea' ? (
                            <Textarea 
                                placeholder={field.placeholder} 
                                disabled 
                                rows={2}
                                className="opacity-60"
                            />
                        ) : field.type === 'select' ? (
                            <Select disabled className="opacity-60">
                                <SelectItem value="option1">Option 1</SelectItem>
                            </Select>
                        ) : field.type === 'number' ? (
                            <NumberInput 
                                placeholder={field.placeholder} 
                                disabled 
                                className="opacity-60"
                            />
                        ) : (
                            <div className="text-sm text-gray-400 italic">
                                Aperçu de {field.type}
                            </div>
                        )}
                    </div>
                );
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-lg shadow-2xl w-full max-w-7xl h-[95vh] flex flex-col slide-in">
                        {/* Header */}
                        <div className="flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50">
                            <div className="flex items-center space-x-4">
                                <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
                                    <i className="ri-edit-line text-white text-lg"></i>
                                </div>
                                <div>
                                    <Title className="text-gray-900">Éditeur Avancé de Formulaire</Title>
                                    <Text className="text-gray-600">{formData.name}</Text>
                                </div>
                            </div>
                            <div className="flex items-center space-x-3">
                                <Button 
                                    variant="outline" 
                                    onClick={() => setPreviewMode(!previewMode)}
                                    icon={previewMode ? "ri-edit-line" : "ri-eye-line"}
                                >
                                    {previewMode ? "Éditer" : "Aperçu"}
                                </Button>
                                <Button variant="outline" onClick={onClose}>
                                    <i className="ri-close-line mr-1"></i>
                                    Fermer
                                </Button>
                                <Button onClick={saveForm} className="bg-blue-600 text-white">
                                    <i className="ri-save-line mr-1"></i>
                                    Sauvegarder
                                </Button>
                            </div>
                        </div>

                        {/* Content */}
                        <div className="flex flex-1 overflow-hidden">
                            {!previewMode ? (
                                <>
                                    {/* Sidebar gauche - Outils */}
                                    <div className="w-80 bg-gray-50 border-r border-gray-200 flex flex-col">
                                        <TabGroup index={activeTab === "fields" ? 0 : activeTab === "settings" ? 1 : 2} onIndexChange={(i) => setActiveTab(["fields", "settings", "integrations"][i])}>
                                            <TabList className="mt-4 mx-4">
                                                <Tab>Champs</Tab>
                                                <Tab>Paramètres</Tab>
                                                <Tab>Intégrations</Tab>
                                            </TabList>
                                            
                                            <TabPanels className="flex-1 overflow-y-auto p-4">
                                                {/* Onglet Champs */}
                                                <TabPanel>
                                                    <div className="space-y-3">
                                                        <div className="mb-4">
                                                            <Text className="font-medium text-gray-900 mb-2">Ajouter un champ</Text>
                                                            <Text className="text-sm text-gray-600">Glissez un élément vers le formulaire</Text>
                                                        </div>
                                                        
                                                        {availableFields.map((field) => (
                                                            <button
                                                                key={field.type}
                                                                onClick={() => addField(field)}
                                                                className="w-full text-left p-3 bg-white border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all group"
                                                            >
                                                                <div className="flex items-center space-x-3">
                                                                    <div className={`w-8 h-8 bg-${field.color}-100 text-${field.color}-600 rounded-lg flex items-center justify-center group-hover:bg-${field.color}-200`}>
                                                                        <i className={field.icon}></i>
                                                                    </div>
                                                                    <div className="flex-1">
                                                                        <div className="font-medium text-sm text-gray-900">{field.label}</div>
                                                                        <div className="text-xs text-gray-500">{field.description}</div>
                                                                    </div>
                                                                    <i className="ri-add-line text-gray-400 group-hover:text-blue-600"></i>
                                                                </div>
                                                            </button>
                                                        ))}
                                                    </div>
                                                </TabPanel>

                                                {/* Onglet Paramètres */}
                                                <TabPanel>
                                                    <div className="space-y-6">
                                                        <Card>
                                                            <CardHeader>
                                                                <Title>Informations générales</Title>
                                                            </CardHeader>
                                                            <CardContent className="space-y-4">
                                                                <div>
                                                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                                                        Nom du formulaire
                                                                    </label>
                                                                    <TextInput
                                                                        value={formData.name}
                                                                        onChange={(e) => setFormData({...formData, name: e.target.value})}
                                                                        placeholder="Nom du formulaire"
                                                                    />
                                                                </div>
                                                                <div>
                                                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                                                        Description
                                                                    </label>
                                                                    <Textarea
                                                                        value={formData.description}
                                                                        onChange={(e) => setFormData({...formData, description: e.target.value})}
                                                                        placeholder="Description du formulaire"
                                                                        rows={3}
                                                                    />
                                                                </div>
                                                                <div>
                                                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                                                        Catégorie
                                                                    </label>
                                                                    <Select value={formData.category} onValueChange={(value) => setFormData({...formData, category: value})}>
                                                                        <SelectItem value="contact">📞 Contact</SelectItem>
                                                                        <SelectItem value="survey">📊 Sondage</SelectItem>
                                                                        <SelectItem value="registration">📝 Inscription</SelectItem>
                                                                        <SelectItem value="feedback">💬 Feedback</SelectItem>
                                                                        <SelectItem value="order">🛒 Commande</SelectItem>
                                                                    </Select>
                                                                </div>
                                                            </CardContent>
                                                        </Card>

                                                        <Card>
                                                            <CardHeader>
                                                                <Title>Options avancées</Title>
                                                            </CardHeader>
                                                            <CardContent className="space-y-4">
                                                                <div className="flex items-center justify-between">
                                                                    <div>
                                                                        <Text className="font-medium">Soumissions multiples</Text>
                                                                        <Text className="text-sm text-gray-600">Autoriser plusieurs soumissions par utilisateur</Text>
                                                                    </div>
                                                                    <Switch 
                                                                        checked={formData.settings.allowMultipleSubmissions}
                                                                        onChange={(checked) => setFormData({
                                                                            ...formData, 
                                                                            settings: {...formData.settings, allowMultipleSubmissions: checked}
                                                                        })}
                                                                    />
                                                                </div>
                                                                
                                                                <div className="flex items-center justify-between">
                                                                    <div>
                                                                        <Text className="font-medium">Connexion requise</Text>
                                                                        <Text className="text-sm text-gray-600">Demander une authentification</Text>
                                                                    </div>
                                                                    <Switch 
                                                                        checked={formData.settings.requireLogin}
                                                                        onChange={(checked) => setFormData({
                                                                            ...formData, 
                                                                            settings: {...formData.settings, requireLogin: checked}
                                                                        })}
                                                                    />
                                                                </div>

                                                                <div className="flex items-center justify-between">
                                                                    <div>
                                                                        <Text className="font-medium">Analytics</Text>
                                                                        <Text className="text-sm text-gray-600">Suivre les performances</Text>
                                                                    </div>
                                                                    <Switch 
                                                                        checked={formData.settings.enableAnalytics}
                                                                        onChange={(checked) => setFormData({
                                                                            ...formData, 
                                                                            settings: {...formData.settings, enableAnalytics: checked}
                                                                        })}
                                                                    />
                                                                </div>

                                                                <div className="flex items-center justify-between">
                                                                    <div>
                                                                        <Text className="font-medium">Réponse automatique</Text>
                                                                        <Text className="text-sm text-gray-600">Email de confirmation</Text>
                                                                    </div>
                                                                    <Switch 
                                                                        checked={formData.settings.autoResponse}
                                                                        onChange={(checked) => setFormData({
                                                                            ...formData, 
                                                                            settings: {...formData.settings, autoResponse: checked}
                                                                        })}
                                                                    />
                                                                </div>

                                                                <div className="flex items-center justify-between">
                                                                    <div>
                                                                        <Text className="font-medium">CAPTCHA</Text>
                                                                        <Text className="text-sm text-gray-600">Protection anti-spam</Text>
                                                                    </div>
                                                                    <Switch 
                                                                        checked={formData.settings.captchaEnabled}
                                                                        onChange={(checked) => setFormData({
                                                                            ...formData, 
                                                                            settings: {...formData.settings, captchaEnabled: checked}
                                                                        })}
                                                                    />
                                                                </div>
                                                            </CardContent>
                                                        </Card>
                                                    </div>
                                                </TabPanel>

                                                {/* Onglet Intégrations */}
                                                <TabPanel>
                                                    <div className="space-y-4">
                                                        <Card>
                                                            <CardHeader>
                                                                <div className="flex items-center space-x-2">
                                                                    <i className="ri-mail-line text-blue-600"></i>
                                                                    <Title>Email</Title>
                                                                    <Badge color={formData.integrations.email.enabled ? "green" : "gray"}>
                                                                        {formData.integrations.email.enabled ? "Activé" : "Désactivé"}
                                                                    </Badge>
                                                                </div>
                                                            </CardHeader>
                                                            <CardContent>
                                                                <div className="space-y-3">
                                                                    <Switch 
                                                                        checked={formData.integrations.email.enabled}
                                                                        onChange={(checked) => setFormData({
                                                                            ...formData,
                                                                            integrations: {
                                                                                ...formData.integrations,
                                                                                email: {...formData.integrations.email, enabled: checked}
                                                                            }
                                                                        })}
                                                                    />
                                                                    {formData.integrations.email.enabled && (
                                                                        <TextInput
                                                                            placeholder="contact@example.com"
                                                                            value={formData.integrations.email.recipient}
                                                                            onChange={(e) => setFormData({
                                                                                ...formData,
                                                                                integrations: {
                                                                                    ...formData.integrations,
                                                                                    email: {...formData.integrations.email, recipient: e.target.value}
                                                                                }
                                                                            })}
                                                                        />
                                                                    )}
                                                                </div>
                                                            </CardContent>
                                                        </Card>

                                                        <Card>
                                                            <CardHeader>
                                                                <div className="flex items-center space-x-2">
                                                                    <i className="ri-webhook-line text-green-600"></i>
                                                                    <Title>Webhook</Title>
                                                                    <Badge color={formData.integrations.webhook.enabled ? "green" : "gray"}>
                                                                        {formData.integrations.webhook.enabled ? "Activé" : "Désactivé"}
                                                                    </Badge>
                                                                </div>
                                                            </CardHeader>
                                                            <CardContent>
                                                                <div className="space-y-3">
                                                                    <Switch 
                                                                        checked={formData.integrations.webhook.enabled}
                                                                        onChange={(checked) => setFormData({
                                                                            ...formData,
                                                                            integrations: {
                                                                                ...formData.integrations,
                                                                                webhook: {...formData.integrations.webhook, enabled: checked}
                                                                            }
                                                                        })}
                                                                    />
                                                                    {formData.integrations.webhook.enabled && (
                                                                        <TextInput
                                                                            placeholder="https://api.example.com/webhook"
                                                                            value={formData.integrations.webhook.url}
                                                                            onChange={(e) => setFormData({
                                                                                ...formData,
                                                                                integrations: {
                                                                                    ...formData.integrations,
                                                                                    webhook: {...formData.integrations.webhook, url: e.target.value}
                                                                                }
                                                                            })}
                                                                        />
                                                                    )}
                                                                </div>
                                                            </CardContent>
                                                        </Card>

                                                        <Card>
                                                            <CardHeader>
                                                                <div className="flex items-center space-x-2">
                                                                    <i className="ri-file-excel-line text-green-600"></i>
                                                                    <Title>Google Sheets</Title>
                                                                    <Badge color={formData.integrations.googleSheets.enabled ? "green" : "gray"}>
                                                                        {formData.integrations.googleSheets.enabled ? "Activé" : "Désactivé"}
                                                                    </Badge>
                                                                </div>
                                                            </CardHeader>
                                                            <CardContent>
                                                                <div className="space-y-3">
                                                                    <Switch 
                                                                        checked={formData.integrations.googleSheets.enabled}
                                                                        onChange={(checked) => setFormData({
                                                                            ...formData,
                                                                            integrations: {
                                                                                ...formData.integrations,
                                                                                googleSheets: {...formData.integrations.googleSheets, enabled: checked}
                                                                            }
                                                                        })}
                                                                    />
                                                                    {formData.integrations.googleSheets.enabled && (
                                                                        <TextInput
                                                                            placeholder="ID de la feuille Google Sheets"
                                                                            value={formData.integrations.googleSheets.sheetId}
                                                                            onChange={(e) => setFormData({
                                                                                ...formData,
                                                                                integrations: {
                                                                                    ...formData.integrations,
                                                                                    googleSheets: {...formData.integrations.googleSheets, sheetId: e.target.value}
                                                                                }
                                                                            })}
                                                                        />
                                                                    )}
                                                                </div>
                                                            </CardContent>
                                                        </Card>

                                                        <Card>
                                                            <CardHeader>
                                                                <div className="flex items-center space-x-2">
                                                                    <i className="ri-flashlight-line text-orange-600"></i>
                                                                    <Title>Zapier</Title>
                                                                    <Badge color={formData.integrations.zapier.enabled ? "green" : "gray"}>
                                                                        {formData.integrations.zapier.enabled ? "Activé" : "Désactivé"}
                                                                    </Badge>
                                                                </div>
                                                            </CardHeader>
                                                            <CardContent>
                                                                <div className="space-y-3">
                                                                    <Switch 
                                                                        checked={formData.integrations.zapier.enabled}
                                                                        onChange={(checked) => setFormData({
                                                                            ...formData,
                                                                            integrations: {
                                                                                ...formData.integrations,
                                                                                zapier: {...formData.integrations.zapier, enabled: checked}
                                                                            }
                                                                        })}
                                                                    />
                                                                    {formData.integrations.zapier.enabled && (
                                                                        <TextInput
                                                                            placeholder="URL du webhook Zapier"
                                                                            value={formData.integrations.zapier.webhookUrl}
                                                                            onChange={(e) => setFormData({
                                                                                ...formData,
                                                                                integrations: {
                                                                                    ...formData.integrations,
                                                                                    zapier: {...formData.integrations.zapier, webhookUrl: e.target.value}
                                                                                }
                                                                            })}
                                                                        />
                                                                    )}
                                                                </div>
                                                            </CardContent>
                                                        </Card>
                                                    </div>
                                                </TabPanel>
                                            </TabPanels>
                                        </TabGroup>
                                    </div>

                                    {/* Zone centrale - Constructeur */}
                                    <div className="flex-1 flex">
                                        {/* Canvas du formulaire */}
                                        <div className="flex-1 p-6 form-builder-grid overflow-y-auto">
                                            <div className="max-w-2xl mx-auto">
                                                <Card className="mb-6">
                                                    <CardHeader>
                                                        <div className="flex items-center justify-between">
                                                            <div>
                                                                <Title>{formData.name}</Title>
                                                                <Text className="text-gray-600">{formData.description}</Text>
                                                            </div>
                                                            <Badge color="blue" className="capitalize">{formData.status}</Badge>
                                                        </div>
                                                    </CardHeader>
                                                </Card>

                                                <div className="space-y-4">
                                                    {formData.fields.length === 0 ? (
                                                        <Card className="p-12 text-center border-2 border-dashed border-gray-300">
                                                            <div className="text-gray-400">
                                                                <i className="ri-add-circle-line text-6xl mb-4"></i>
                                                                <Title className="text-gray-500 mb-2">Formulaire vide</Title>
                                                                <Text className="text-gray-400">
                                                                    Ajoutez des champs depuis la barre latérale pour commencer à construire votre formulaire
                                                                </Text>
                                                            </div>
                                                        </Card>
                                                    ) : (
                                                        formData.fields.map((field) => renderFieldPreview(field))
                                                    )}
                                                </div>

                                                {formData.fields.length > 0 && (
                                                    <Card className="mt-6">
                                                        <CardContent className="text-center">
                                                            <Button className="w-full bg-blue-600 text-white">
                                                                <i className="ri-send-plane-line mr-2"></i>
                                                                Envoyer le formulaire
                                                            </Button>
                                                        </CardContent>
                                                    </Card>
                                                )}
                                            </div>
                                        </div>

                                        {/* Panneau de propriétés */}
                                        {selectedField && (
                                            <div className="w-80 bg-white border-l border-gray-200 p-6 overflow-y-auto">
                                                <div className="flex items-center justify-between mb-4">
                                                    <Title>Propriétés du champ</Title>
                                                    <button 
                                                        onClick={() => setSelectedField(null)}
                                                        className="text-gray-400 hover:text-gray-600"
                                                    >
                                                        <i className="ri-close-line"></i>
                                                    </button>
                                                </div>

                                                <div className="space-y-4">
                                                    <div>
                                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                                            Label
                                                        </label>
                                                        <TextInput
                                                            value={selectedField.label}
                                                            onChange={(e) => updateField(selectedField.id, { label: e.target.value })}
                                                            placeholder="Label du champ"
                                                        />
                                                    </div>

                                                    <div>
                                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                                            Placeholder
                                                        </label>
                                                        <TextInput
                                                            value={selectedField.placeholder || ''}
                                                            onChange={(e) => updateField(selectedField.id, { placeholder: e.target.value })}
                                                            placeholder="Texte d'aide"
                                                        />
                                                    </div>

                                                    <div className="flex items-center justify-between">
                                                        <div>
                                                            <Text className="font-medium">Champ requis</Text>
                                                            <Text className="text-sm text-gray-600">Obligatoire pour soumettre</Text>
                                                        </div>
                                                        <Switch 
                                                            checked={selectedField.required}
                                                            onChange={(checked) => updateField(selectedField.id, { required: checked })}
                                                        />
                                                    </div>

                                                    {(selectedField.type === 'text' || selectedField.type === 'textarea') && (
                                                        <>
                                                            <div>
                                                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                                                    Longueur minimum
                                                                </label>
                                                                <NumberInput
                                                                    value={selectedField.validation?.minLength || 0}
                                                                    onChange={(value) => updateField(selectedField.id, {
                                                                        validation: { ...selectedField.validation, minLength: value }
                                                                    })}
                                                                    min={0}
                                                                />
                                                            </div>

                                                            <div>
                                                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                                                    Longueur maximum
                                                                </label>
                                                                <NumberInput
                                                                    value={selectedField.validation?.maxLength || 100}
                                                                    onChange={(value) => updateField(selectedField.id, {
                                                                        validation: { ...selectedField.validation, maxLength: value }
                                                                    })}
                                                                    min={1}
                                                                />
                                                            </div>
                                                        </>
                                                    )}

                                                    {(selectedField.type === 'select' || selectedField.type === 'radio' || selectedField.type === 'checkbox') && (
                                                        <div>
                                                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                                                Options
                                                            </label>
                                                            <div className="space-y-2">
                                                                {(selectedField.options || []).map((option, index) => (
                                                                    <div key={index} className="flex items-center space-x-2">
                                                                        <TextInput
                                                                            value={option}
                                                                            onChange={(e) => {
                                                                                const newOptions = [...(selectedField.options || [])];
                                                                                newOptions[index] = e.target.value;
                                                                                updateField(selectedField.id, { options: newOptions });
                                                                            }}
                                                                            placeholder={`Option ${index + 1}`}
                                                                        />
                                                                        <button
                                                                            onClick={() => {
                                                                                const newOptions = (selectedField.options || []).filter((_, i) => i !== index);
                                                                                updateField(selectedField.id, { options: newOptions });
                                                                            }}
                                                                            className="text-red-500 hover:text-red-700"
                                                                        >
                                                                            <i className="ri-delete-bin-line"></i>
                                                                        </button>
                                                                    </div>
                                                                ))}
                                                                <Button 
                                                                    variant="outline" 
                                                                    onClick={() => {
                                                                        const newOptions = [...(selectedField.options || []), `Option ${(selectedField.options || []).length + 1}`];
                                                                        updateField(selectedField.id, { options: newOptions });
                                                                    }}
                                                                    className="w-full"
                                                                >
                                                                    <i className="ri-add-line mr-2"></i>
                                                                    Ajouter une option
                                                                </Button>
                                                            </div>
                                                        </div>
                                                    )}

                                                    <div className="pt-4 border-t border-gray-200">
                                                        <Button 
                                                            variant="outline" 
                                                            color="red"
                                                            onClick={() => removeField(selectedField.id)}
                                                            className="w-full"
                                                        >
                                                            <i className="ri-delete-bin-line mr-2"></i>
                                                            Supprimer le champ
                                                        </Button>
                                                    </div>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </>
                            ) : (
                                /* Mode aperçu */
                                <div className="flex-1 p-6 bg-gray-50 overflow-y-auto">
                                    <div className="max-w-2xl mx-auto">
                                        <Card>
                                            <CardHeader className="text-center">
                                                <Title className="text-2xl">{formData.name}</Title>
                                                <Text className="text-gray-600">{formData.description}</Text>
                                            </CardHeader>
                                            <CardContent className="space-y-6">
                                                {formData.fields.map((field, index) => (
                                                    <div key={field.id}>
                                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                                            {field.label}
                                                            {field.required && <span className="text-red-500 ml-1">*</span>}
                                                        </label>
                                                        
                                                        {field.type === 'text' || field.type === 'email' || field.type === 'tel' ? (
                                                            <TextInput placeholder={field.placeholder} />
                                                        ) : field.type === 'textarea' ? (
                                                            <Textarea placeholder={field.placeholder} rows={4} />
                                                        ) : field.type === 'select' ? (
                                                            <Select>
                                                                {(field.options || []).map((option, optIndex) => (
                                                                    <SelectItem key={optIndex} value={option}>{option}</SelectItem>
                                                                ))}
                                                            </Select>
                                                        ) : field.type === 'number' ? (
                                                            <NumberInput placeholder={field.placeholder} />
                                                        ) : field.type === 'checkbox' ? (
                                                            <div className="space-y-2">
                                                                {(field.options || []).map((option, optIndex) => (
                                                                    <div key={optIndex} className="flex items-center space-x-2">
                                                                        <Checkbox id={`${field.id}_${optIndex}`} />
                                                                        <label htmlFor={`${field.id}_${optIndex}`} className="text-sm">{option}</label>
                                                                    </div>
                                                                ))}
                                                            </div>
                                                        ) : (
                                                            <div className="p-4 bg-gray-100 rounded-lg text-center text-gray-500">
                                                                Aperçu de {field.type}
                                                            </div>
                                                        )}
                                                    </div>
                                                ))}
                                                
                                                <div className="pt-6 border-t border-gray-200">
                                                    <Button className="w-full bg-blue-600 text-white">
                                                        <i className="ri-send-plane-line mr-2"></i>
                                                        Envoyer le formulaire
                                                    </Button>
                                                </div>
                                            </CardContent>
                                        </Card>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Analytics Footer */}
                        <div className="border-t border-gray-200 bg-gray-50 p-4">
                            <Grid numItems={4} className="gap-4">
                                <Card>
                                    <CardContent>
                                        <Flex className="items-center space-x-2">
                                            <div className="w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center">
                                                <i className="ri-eye-line"></i>
                                            </div>
                                            <div>
                                                <Metric>{formData.analytics.totalViews.toLocaleString()}</Metric>
                                                <Text>Vues totales</Text>
                                            </div>
                                        </Flex>
                                    </CardContent>
                                </Card>
                                
                                <Card>
                                    <CardContent>
                                        <Flex className="items-center space-x-2">
                                            <div className="w-8 h-8 bg-green-100 text-green-600 rounded-lg flex items-center justify-center">
                                                <i className="ri-file-text-line"></i>
                                            </div>
                                            <div>
                                                <Metric>{formData.analytics.submissions}</Metric>
                                                <Text>Soumissions</Text>
                                            </div>
                                        </Flex>
                                    </CardContent>
                                </Card>
                                
                                <Card>
                                    <CardContent>
                                        <Flex className="items-center space-x-2">
                                            <div className="w-8 h-8 bg-yellow-100 text-yellow-600 rounded-lg flex items-center justify-center">
                                                <i className="ri-percent-line"></i>
                                            </div>
                                            <div>
                                                <Metric>{formData.analytics.conversionRate}%</Metric>
                                                <Text>Taux de conversion</Text>
                                            </div>
                                        </Flex>
                                    </CardContent>
                                </Card>
                                
                                <Card>
                                    <CardContent>
                                        <Flex className="items-center space-x-2">
                                            <div className="w-8 h-8 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center">
                                                <i className="ri-time-line"></i>
                                            </div>
                                            <div>
                                                <Metric>{formData.analytics.averageTime}</Metric>
                                                <Text>Temps moyen</Text>
                                            </div>
                                        </Flex>
                                    </CardContent>
                                </Card>
                            </Grid>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [isModalOpen, setIsModalOpen] = useState(true);

            const handleSave = (formData) => {
                console.log('Form saved:', formData);
                alert('Formulaire sauvegardé avec succès !');
            };

            return (
                <div className="min-h-screen bg-gray-100 p-8">
                    <div className="text-center">
                        <Title className="text-3xl mb-4">Éditeur Avancé de Formulaire FormEase</Title>
                        <Text className="text-gray-600 mb-8">Interface moderne avec composants Tremor et icônes RemixIcon</Text>
                        
                        <Button onClick={() => setIsModalOpen(true)} className="bg-blue-600 text-white">
                            <i className="ri-edit-line mr-2"></i>
                            Ouvrir l'éditeur
                        </Button>
                    </div>

                    <FormEditorModal 
                        form={sampleForm}
                        isOpen={isModalOpen}
                        onClose={() => setIsModalOpen(false)}
                        onSave={handleSave}
                    />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
