<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FormEase - Tableau de Bord Avancé</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../styles/tremor-base.css">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        tremor: {
                            brand: {
                                faint: '#f0f9ff',
                                muted: '#bae6fd',
                                subtle: '#38bdf8',
                                DEFAULT: '#0ea5e9',
                                emphasis: '#0284c7',
                                inverted: '#ffffff'
                            }
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'ui-sans-serif', 'system-ui'],
                    },
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navigation Sidebar -->
    <div class="fixed inset-y-0 left-0 w-64 bg-white shadow-lg z-50 transform transition-transform duration-300" id="sidebar">
        <!-- Logo -->
        <div class="flex items-center px-6 py-4 border-b border-gray-200">
            <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                <i class="ri-file-list-3-line text-white text-xl"></i>
            </div>
            <span class="ml-3 text-xl font-bold text-gray-900">FormEase</span>
        </div>

        <!-- Navigation Menu -->
        <nav class="mt-6">
            <div class="px-3">
                <!-- Dashboard -->
                <a href="home.html" class="flex items-center px-3 py-2 text-blue-600 bg-blue-50 rounded-lg mb-1">
                    <i class="ri-dashboard-line mr-3"></i>
                    <span>Tableau de bord</span>
                </a>

                <!-- Forms -->
                <div class="mt-6">
                    <h3 class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Formulaires</h3>
                    <a href="../forms/list.html" class="flex items-center px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg mb-1">
                        <i class="ri-file-list-2-line mr-3"></i>
                        <span>Mes formulaires</span>
                    </a>
                    <a href="../forms/builder.html" class="flex items-center px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg mb-1">
                        <i class="ri-tools-line mr-3"></i>
                        <span>Créateur</span>
                    </a>
                </div>

                <!-- Analytics -->
                <div class="mt-6">
                    <h3 class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Analytics</h3>
                    <a href="#" class="flex items-center px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg mb-1">
                        <i class="ri-bar-chart-line mr-3"></i>
                        <span>Statistiques</span>
                    </a>
                </div>
            </div>

            <!-- Logout -->
            <div class="absolute bottom-0 left-0 right-0 p-3 border-t border-gray-200">
                <button id="logoutBtn" class="flex items-center w-full px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg">
                    <i class="ri-logout-box-line mr-3"></i>
                    <span>Déconnexion</span>
                </button>
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="lg:ml-64">
        <!-- Top Header -->
        <header class="bg-white shadow-sm border-b border-gray-200 lg:hidden">
            <div class="flex items-center justify-between px-6 py-4">
                <h1 class="text-xl font-semibold text-gray-900">Dashboard</h1>
                <button id="burgerToggle" class="p-2 rounded-lg hover:bg-gray-100">
                    <i class="ri-menu-line text-xl"></i>
                </button>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="p-6">
            <!-- Page Header -->
            <div class="mb-8">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900">Tableau de Bord Avancé</h1>
                        <p class="text-gray-600 mt-1">Analyse avancée de vos formulaires avec graphiques Tremor</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="text-right">
                            <p class="text-sm font-medium text-gray-900" id="userName">Jeff KOSI</p>
                            <p class="text-sm text-gray-600" id="userEmail">jeff.kosi@formease.com</p>
                        </div>
                        <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center">
                            <span class="text-white font-medium">JK</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Total Forms -->
                <div class="tremor-Card tremor-Card-rounded tremor-Card-shadow">
                    <div class="tremor-CardContent">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="tremor-Text text-sm font-medium text-gray-600">Total Formulaires</h3>
                                <p class="tremor-Metric text-2xl font-bold text-gray-900" id="totalForms">23</p>
                                <p class="tremor-Text text-sm text-green-600 mt-1">↗ +12% ce mois</p>
                            </div>
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <i class="ri-file-list-3-line text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Total Responses -->
                <div class="tremor-Card tremor-Card-rounded tremor-Card-shadow">
                    <div class="tremor-CardContent">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="tremor-Text text-sm font-medium text-gray-600">Réponses totales</h3>
                                <p class="tremor-Metric text-2xl font-bold text-gray-900" id="totalResponses">1,247</p>
                                <p class="tremor-Text text-sm text-green-600 mt-1">↗ +8% ce mois</p>
                            </div>
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <i class="ri-chat-3-line text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Conversion Rate -->
                <div class="tremor-Card tremor-Card-rounded tremor-Card-shadow">
                    <div class="tremor-CardContent">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="tremor-Text text-sm font-medium text-gray-600">Taux de conversion</h3>
                                <p class="tremor-Metric text-2xl font-bold text-gray-900" id="conversionRate">48.9%</p>
                                <p class="tremor-Text text-sm text-red-600 mt-1">↘ -2% ce mois</p>
                            </div>
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <i class="ri-arrow-up-line text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Active Forms -->
                <div class="tremor-Card tremor-Card-rounded tremor-Card-shadow">
                    <div class="tremor-CardContent">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="tremor-Text text-sm font-medium text-gray-600">Formulaires actifs</h3>
                                <p class="tremor-Metric text-2xl font-bold text-gray-900" id="activeForms">18</p>
                                <p class="tremor-Text text-sm text-green-600 mt-1">↗ +3 ce mois</p>
                            </div>
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                <i class="ri-play-circle-line text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Combo Chart Principal -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <div class="lg:col-span-2 tremor-Card tremor-Card-rounded tremor-Card-shadow">
                    <div class="tremor-CardHeader">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="tremor-Title">Formulaires & Réponses</h3>
                                <p class="tremor-Text text-sm text-gray-600 mt-1">
                                    Analyse comparative mensuelle
                                </p>
                            </div>
                        </div>
                        <div class="tremor-CardSubtitle mt-4">
                            <div class="tremor-Legend">
                                <div class="tremor-LegendItem">
                                    <span class="tremor-LegendIcon bg-blue-500"></span>
                                    <span class="tremor-LegendText">Formulaires créés</span>
                                    <span class="tremor-Badge tremor-Badge-neutral tremor-Badge-sm ml-2">Barres</span>
                                </div>
                                <div class="tremor-LegendItem">
                                    <span class="tremor-LegendIcon bg-green-500"></span>
                                    <span class="tremor-LegendText">Réponses reçues</span>
                                    <span class="tremor-Badge tremor-Badge-neutral tremor-Badge-sm ml-2">Ligne</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tremor-CardContent">
                        <div id="comboChart" style="height: 320px;"></div>
                    </div>
                </div>

                <!-- Donut Chart -->
                <div class="tremor-Card tremor-Card-rounded tremor-Card-shadow">
                    <div class="tremor-CardHeader">
                        <h3 class="tremor-Title">Types de formulaires</h3>
                    </div>
                    <div class="tremor-CardContent">
                        <div id="donutChart" style="height: 300px;"></div>
                    </div>
                </div>
            </div>

            <!-- Performance Chart Avancé -->
            <div class="mb-8">
                <div class="tremor-Card tremor-Card-rounded tremor-Card-shadow">
                    <div class="tremor-CardHeader">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="tremor-Title">Performance Temporelle Avancée</h3>
                                <p class="tremor-Text text-sm text-gray-600 mt-1">
                                    Analyse multi-métriques avec annotations d'événements
                                </p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="tremor-ToggleGroup">
                                    <button id="perfChartDaily" class="tremor-Toggle tremor-Toggle-active tremor-Toggle-sm">
                                        Jour
                                    </button>
                                    <button id="perfChartWeekly" class="tremor-Toggle tremor-Toggle-sm">
                                        Semaine
                                    </button>
                                    <button id="perfChartMonthly" class="tremor-Toggle tremor-Toggle-sm">
                                        Mois
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="tremor-CardSubtitle mt-4">
                            <div class="tremor-Legend">
                                <div class="tremor-LegendItem">
                                    <span class="tremor-LegendIcon bg-blue-500"></span>
                                    <span class="tremor-LegendText">Créations</span>
                                    <span class="tremor-Badge tremor-Badge-blue tremor-Badge-sm ml-2">↗ +12%</span>
                                </div>
                                <div class="tremor-LegendItem">
                                    <span class="tremor-LegendIcon bg-green-500"></span>
                                    <span class="tremor-LegendText">Réponses</span>
                                    <span class="tremor-Badge tremor-Badge-green tremor-Badge-sm ml-2">↗ +8%</span>
                                </div>
                                <div class="tremor-LegendItem">
                                    <span class="tremor-LegendIcon bg-purple-500"></span>
                                    <span class="tremor-LegendText">Taux conversion</span>
                                    <span class="tremor-Badge tremor-Badge-purple tremor-Badge-sm ml-2">68%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tremor-CardContent">
                        <div id="performanceComboChart" style="height: 400px;"></div>
                        
                        <!-- Métriques de synthèse -->
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mt-6 pt-6 border-t border-gray-200">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-gray-900">2.4K</div>
                                <div class="text-sm text-gray-600">Total Créations</div>
                                <div class="text-xs text-green-600 mt-1">↗ +18% vs période précédente</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-gray-900">1.6K</div>
                                <div class="text-sm text-gray-600">Total Réponses</div>
                                <div class="text-xs text-green-600 mt-1">↗ +12% vs période précédente</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-gray-900">68%</div>
                                <div class="text-sm text-gray-600">Taux Conversion</div>
                                <div class="text-xs text-yellow-600 mt-1">↘ -2% vs période précédente</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-gray-900">3m 24s</div>
                                <div class="text-sm text-gray-600">Temps Moyen</div>
                                <div class="text-xs text-green-600 mt-1">↗ -15s vs période précédente</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Autres graphiques -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Area Chart -->
                <div class="tremor-Card tremor-Card-rounded tremor-Card-shadow">
                    <div class="tremor-CardHeader">
                        <h3 class="tremor-Title">Trafic des formulaires</h3>
                    </div>
                    <div class="tremor-CardContent">
                        <div id="areaChart" style="height: 250px;"></div>
                    </div>
                </div>

                <!-- Bar Chart -->
                <div class="tremor-Card tremor-Card-rounded tremor-Card-shadow">
                    <div class="tremor-CardHeader">
                        <h3 class="tremor-Title">Top formulaires</h3>
                    </div>
                    <div class="tremor-CardContent">
                        <div id="barChart" style="height: 250px;"></div>
                    </div>
                </div>
            </div>

            <!-- Recent Forms -->
            <div class="tremor-Card tremor-Card-rounded tremor-Card-shadow">
                <div class="tremor-CardHeader">
                    <h3 class="tremor-Title">Formulaires récents</h3>
                </div>
                <div class="tremor-CardContent">
                    <div id="recentForms" class="space-y-3">
                        <!-- Content will be loaded by JavaScript -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Mode démonstration
        console.log('Dashboard en mode démonstration');

        // Variables globales
        let currentPeriod = 'monthly';
        let performanceChartPeriod = 'daily';
        let performanceChartInstance = null;
        
        // Données de démonstration
        const demoData = {
            monthly: {
                comboChart: {
                    categories: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin'],
                    formsCreated: [23, 34, 28, 45, 38, 29],
                    responsesReceived: [18, 26, 22, 35, 29, 23]
                },
                formTypes: [
                    { name: 'Contact', value: 35 },
                    { name: 'Enquête', value: 28 },
                    { name: 'Inscription', value: 22 },
                    { name: 'Feedback', value: 15 }
                ],
                trafficData: {
                    categories: ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'],
                    values: [120, 185, 158, 220, 194, 87, 167]
                },
                topForms: [
                    { name: 'Contact Newsletter', responses: 45 },
                    { name: 'Enquête Satisfaction', responses: 38 },
                    { name: 'Inscription Webinar', responses: 32 },
                    { name: 'Feedback Produit', responses: 28 },
                    { name: 'Demande Devis', responses: 24 }
                ]
            }
        };

        // Performance data with annotations
        const performanceData = {
            daily: {
                categories: ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'],
                creations: [45, 52, 38, 65, 49, 23, 41],
                responses: [38, 42, 31, 48, 39, 18, 33],
                conversionRate: [84, 81, 82, 74, 80, 78, 80],
                annotations: [
                    { x: 'Mer', text: 'Mise à jour', color: '#3B82F6' },
                    { x: 'Ven', text: 'Campagne', color: '#10B981' }
                ]
            },
            weekly: {
                categories: ['S1', 'S2', 'S3', 'S4'],
                creations: [283, 315, 267, 298],
                responses: [221, 248, 198, 235],
                conversionRate: [78, 79, 74, 79],
                annotations: [
                    { x: 'S2', text: 'Nouveau feature', color: '#8B5CF6' }
                ]
            },
            monthly: {
                categories: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin'],
                creations: [1205, 1387, 1156, 1423, 1267, 1198],
                responses: [967, 1089, 884, 1124, 999, 943],
                conversionRate: [80, 78, 76, 79, 79, 79],
                annotations: [
                    { x: 'Mar', text: 'Refonte UI', color: '#F59E0B' },
                    { x: 'Avr', text: 'Campagne Printemps', color: '#EF4444' }
                ]
            }
        };

        // Combo Chart principal
        function initComboChart() {
            const data = demoData[currentPeriod].comboChart;
            
            const options = {
                series: [{
                    name: 'Formulaires créés',
                    type: 'column',
                    data: data.formsCreated
                }, {
                    name: 'Réponses reçues',
                    type: 'line',
                    data: data.responsesReceived
                }],
                chart: {
                    height: 320,
                    type: 'line',
                    toolbar: { show: false },
                    animations: { enabled: true }
                },
                stroke: {
                    width: [0, 3]
                },
                dataLabels: {
                    enabled: false
                },
                labels: data.categories,
                colors: ['#3B82F6', '#10B981'],
                xaxis: {
                    type: 'category',
                    labels: {
                        style: { colors: '#6B7280' }
                    }
                },
                yaxis: [{
                    title: {
                        text: 'Formulaires créés',
                        style: { color: '#3B82F6' }
                    }
                }, {
                    opposite: true,
                    title: {
                        text: 'Réponses reçues',
                        style: { color: '#10B981' }
                    }
                }],
                grid: {
                    borderColor: '#F3F4F6'
                },
                legend: {
                    show: false
                }
            };

            const chart = new ApexCharts(document.querySelector("#comboChart"), options);
            chart.render();
        }

        // Performance Combo Chart
        function initPerformanceComboChart() {
            if (performanceChartInstance) {
                performanceChartInstance.destroy();
            }

            const data = performanceData[performanceChartPeriod];
            
            const options = {
                series: [{
                    name: 'Créations',
                    type: 'column',
                    data: data.creations
                }, {
                    name: 'Réponses',
                    type: 'column',
                    data: data.responses
                }, {
                    name: 'Taux de conversion (%)',
                    type: 'line',
                    data: data.conversionRate
                }],
                chart: {
                    height: 400,
                    type: 'line',
                    toolbar: { show: true }
                },
                stroke: {
                    width: [0, 0, 4],
                    curve: 'smooth'
                },
                dataLabels: {
                    enabled: true,
                    enabledOnSeries: [2],
                    formatter: function(val) {
                        return val + '%';
                    }
                },
                labels: data.categories,
                colors: ['#3B82F6', '#10B981', '#8B5CF6'],
                yaxis: [{
                    title: {
                        text: 'Nombre de formulaires'
                    }
                }, {
                    opposite: true,
                    title: {
                        text: 'Taux de conversion (%)'
                    },
                    min: 0,
                    max: 100
                }],
                grid: {
                    borderColor: '#F3F4F6'
                },
                legend: {
                    show: false
                },
                annotations: {
                    xaxis: data.annotations.map(annotation => ({
                        x: annotation.x,
                        strokeDashArray: 5,
                        borderColor: annotation.color,
                        label: {
                            borderColor: annotation.color,
                            style: {
                                color: '#fff',
                                background: annotation.color,
                                fontSize: '10px'
                            },
                            text: annotation.text
                        }
                    }))
                }
            };

            performanceChartInstance = new ApexCharts(document.querySelector("#performanceComboChart"), options);
            performanceChartInstance.render();
        }

        // Donut Chart
        function initDonutChart() {
            const data = demoData[currentPeriod].formTypes;
            
            const options = {
                series: data.map(item => item.value),
                chart: {
                    type: 'donut',
                    height: 300
                },
                labels: data.map(item => item.name),
                colors: ['#3B82F6', '#10B981', '#8B5CF6', '#F59E0B'],
                legend: {
                    position: 'bottom'
                }
            };

            const chart = new ApexCharts(document.querySelector("#donutChart"), options);
            chart.render();
        }

        // Area Chart
        function initAreaChart() {
            const data = demoData[currentPeriod].trafficData;
            
            const options = {
                series: [{
                    name: 'Vues',
                    data: data.values
                }],
                chart: {
                    type: 'area',
                    height: 250,
                    toolbar: { show: false }
                },
                dataLabels: {
                    enabled: false
                },
                stroke: {
                    curve: 'smooth',
                    width: 2
                },
                colors: ['#3B82F6'],
                xaxis: {
                    categories: data.categories
                },
                fill: {
                    type: 'gradient'
                }
            };

            const chart = new ApexCharts(document.querySelector("#areaChart"), options);
            chart.render();
        }

        // Bar Chart
        function initBarChart() {
            const data = demoData[currentPeriod].topForms;
            
            const options = {
                series: [{
                    name: 'Réponses',
                    data: data.map(form => form.responses)
                }],
                chart: {
                    type: 'bar',
                    height: 250,
                    toolbar: { show: false }
                },
                colors: ['#10B981'],
                plotOptions: {
                    bar: {
                        borderRadius: 4,
                        horizontal: true
                    }
                },
                dataLabels: {
                    enabled: false
                },
                xaxis: {
                    categories: data.map(form => form.name)
                }
            };

            const chart = new ApexCharts(document.querySelector("#barChart"), options);
            chart.render();
        }

        // Performance Chart Controls
        function initPerformanceChartControls() {
            const dailyBtn = document.getElementById('perfChartDaily');
            const weeklyBtn = document.getElementById('perfChartWeekly');
            const monthlyBtn = document.getElementById('perfChartMonthly');

            function updatePeriodButtons(activePeriod) {
                [dailyBtn, weeklyBtn, monthlyBtn].forEach(btn => {
                    btn.classList.remove('tremor-Toggle-active');
                });
                
                if (activePeriod === 'daily') dailyBtn.classList.add('tremor-Toggle-active');
                if (activePeriod === 'weekly') weeklyBtn.classList.add('tremor-Toggle-active');
                if (activePeriod === 'monthly') monthlyBtn.classList.add('tremor-Toggle-active');
            }

            dailyBtn?.addEventListener('click', () => {
                performanceChartPeriod = 'daily';
                updatePeriodButtons('daily');
                initPerformanceComboChart();
            });

            weeklyBtn?.addEventListener('click', () => {
                performanceChartPeriod = 'weekly';
                updatePeriodButtons('weekly');
                initPerformanceComboChart();
            });

            monthlyBtn?.addEventListener('click', () => {
                performanceChartPeriod = 'monthly';
                updatePeriodButtons('monthly');
                initPerformanceComboChart();
            });
        }

        // Load recent forms
        function loadRecentForms() {
            const demoForms = [
                { id: 1, title: 'Formulaire de Contact', responses: 45, status: 'active' },
                { id: 2, title: 'Enquête Satisfaction', responses: 32, status: 'active' },
                { id: 3, title: 'Inscription Newsletter', responses: 28, status: 'active' },
                { id: 4, title: 'Feedback Produit', responses: 15, status: 'inactive' },
                { id: 5, title: 'Demande de Devis', responses: 22, status: 'active' }
            ];
            
            const container = document.getElementById('recentForms');
            container.innerHTML = demoForms.map(form => `
                <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                    <div class="flex items-center">
                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                            <i class="ri-file-list-line text-blue-600"></i>
                        </div>
                        <div class="ml-3">
                            <h4 class="font-medium text-gray-900">${form.title}</h4>
                            <p class="text-sm text-gray-600">${form.responses} réponses</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="px-2 py-1 text-xs rounded-full ${form.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}">
                            ${form.status === 'active' ? 'Actif' : 'Inactif'}
                        </span>
                    </div>
                </div>
            `).join('');
        }

        // Burger menu toggle
        function initBurgerMenu() {
            const burgerToggle = document.getElementById('burgerToggle');
            const sidebar = document.getElementById('sidebar');

            burgerToggle?.addEventListener('click', function() {
                sidebar.classList.toggle('-translate-x-full');
            });
        }

        // Logout
        function initLogout() {
            const logoutBtn = document.getElementById('logoutBtn');
            logoutBtn?.addEventListener('click', function() {
                window.location.href = '../auth/login.html';
            });
        }

        // Initialize all charts
        function initializeCharts() {
            initComboChart();
            initPerformanceComboChart();
            initDonutChart();
            initAreaChart();
            initBarChart();
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, initializing...');
            
            loadRecentForms();
            initBurgerMenu();
            initLogout();
            
            // Initialize charts after a delay
            setTimeout(() => {
                initializeCharts();
                initPerformanceChartControls();
            }, 1000);
        });
    </script>
</body>
</html>
